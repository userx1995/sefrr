<div class="flex flex-col flex-auto w-full">

    <div class="flex flex-wrap w-full max-w-screen-xl mx-auto p-6 md:p-8">
        <!-- Schools list -->
        <div class="flex flex-col flex-auto bg-card shadow rounded-2xl overflow-hidden">
            <div class="p-6">
                <!-- Title and action buttons -->
                <div class="flex items-center justify-between w-full">
                    <div>
                        <h2 class="text-3xl font-semibold tracking-tight leading-8">Loans</h2>
                        <div class="font-medium tracking-tight text-secondary"></div>
                    </div>
                    <!-- <div class="flex items-center ml-6">
                        <button class="hidden sm:inline-flex ml-3" mat-flat-button [color]="'primary'"
                            routerLink="./new">
                            <mat-icon class="icon-size-5" [svgIcon]="'heroicons_solid:plus'"></mat-icon>
                            <span class="ml-2">Add School</span>
                        </button> -->

                    <!-- Actions menu (visible on xs) -->
                    <!-- <div class="sm:hidden">
                            <button [matMenuTriggerFor]="actionsMenu" mat-icon-button>
                                <mat-icon [svgIcon]="'heroicons_outline:plus'"></mat-icon>
                            </button>
                            <mat-menu #actionsMenu="matMenu">
                                <button mat-menu-item routerLink="./new">Add School</button>
                            </mat-menu>
                        </div>
                    </div> -->
                </div>
            </div>
            <div class="overflow-x-auto mx-6">
                <table class="w-full bg-transparent" mat-table matSort [dataSource]="loansDataSource"
                    [trackBy]="trackByFn" #recentTransactionsTable>

                    <!-- loan code -->
                    <ng-container matColumnDef="code">
                        <th mat-header-cell mat-sort-header *matHeaderCellDef>
                            Loan Code
                        </th>
                        <td mat-cell *matCellDef="let element">
                            <span class="pr-6 font-medium text-sm text-secondary whitespace-nowrap">
                                {{element.code}}
                            </span>
                        </td>
                    </ng-container>

                    <!-- Name English -->
                    <ng-container matColumnDef="nameEnglish">
                        <th mat-header-cell mat-sort-header *matHeaderCellDef>
                            Name(En)
                        </th>
                        <td mat-cell *matCellDef="let element">
                            <span class="pr-6 whitespace-nowrap">
                                {{element.nameEnglish}}
                            </span>
                        </td>
                    </ng-container>

                    <!-- requested Amount -->
                    <ng-container matColumnDef="requestedAmount">
                        <th mat-header-cell mat-sort-header *matHeaderCellDef>
                            requestedAmount
                        </th>
                        <td mat-cell *matCellDef="let element">
                            <span class="pr-6 whitespace-nowrap">
                                {{element.requestedAmount?.amount }}
                            </span>
                        </td>
                    </ng-container>

                    <!-- referenceNumber -->
                    <ng-container matColumnDef="referenceNumber">
                        <th mat-header-cell mat-sort-header *matHeaderCellDef>
                            referenceNumber
                        </th>
                        <td mat-cell *matCellDef="let element">
                            <span class="pr-6 whitespace-nowrap">
                                {{element.referenceNumber}}
                            </span>
                        </td>
                    </ng-container>

                    <!-- status -->
                    <ng-container matColumnDef="status">
                        <th mat-header-cell mat-sort-header *matHeaderCellDef>
                            status
                        </th>
                        <td mat-cell *matCellDef="let element">
                            <span class="pr-6 whitespace-nowrap">
                                {{element.status}}
                            </span>
                        </td>
                    </ng-container>

                    <!-- Download -->
                    <ng-container matColumnDef="download">
                        <th mat-header-cell mat-sort-header *matHeaderCellDef>
                            Download CSV
                        </th>
                        <td mat-cell *matCellDef="let element">
                            <span class="pr-6 whitespace-nowrap">
                                <button class="min-w-10 min-h-7 h-7 px-2 leading-6" mat-stroked-button
                                    (click)="downloadCSV(element)">CSV
                                    <mat-icon class="icon-size-5" [svgIcon]="'mat_solid:file_download'"></mat-icon>
                                </button>
                            </span>

                        </td>
                    </ng-container>
                    <!-- Details -->
                    <ng-container matColumnDef="details">
                        <th mat-header-cell mat-sort-header *matHeaderCellDef>
                            Details
                        </th>
                        <td mat-cell *matCellDef="let element">
                            <span class="pr-6 whitespace-nowrap">
                                <button class="min-w-10 min-h-7 h-7 px-2 leading-6" mat-stroked-button
                                    (click)="openLoanDetailsPopup(element)">
                                    <mat-icon class="icon-size-5" [svgIcon]="'heroicons_solid:eye'"></mat-icon>
                                </button>
                            </span>

                        </td>
                    </ng-container>
                    <tr mat-header-row *matHeaderRowDef="loansTableColumns; sticky: true"></tr>
                    <tr class="order-row h-16" mat-row *matRowDef="let row; columns: loansTableColumns;"></tr>
                </table>
                <mat-paginator class="border-b sm:border-t sm:border-b-0 z-10 dark:bg-transparent"
                    [ngClass]="{'pointer-events-none': isLoading}" [length]="pagination?.totalElements" [pageIndex]="0"
                    [pageSize]="'10'" [pageSizeOptions]="[10, 25, 100]" [showFirstLastButtons]="true"></mat-paginator>
            </div>
        </div>
    </div>
</div>